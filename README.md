# live2d_arduino_piano

このプロジェクトは、**Live2DモデルのモーションをArduinoを使って制御し、ピアノ演奏に合わせて動く**を実現するためのものです。

## 目次

- [概要](#概要)
- [インストール方法](#インストール方法)
- [用意するもの](#用意するもの)
- [環境](#環境)
- [使い方](#使い方)
- [機能](#機能)
- [依存関係](#依存関係)
- [貢献](#貢献)
- [ライセンス](#ライセンス)
- [連絡先](#連絡先)

## 概要

このプロジェクトは、**Live2Dモデルを、Arduinoで制御されたピアノ演奏に合わせて動かす**ことを目的としています。
主に**ライブ配信やバーチャルイベント**で、**視覚的なエンターテイメント**を提供するために使用できます。

## インストール方法

1. **リポジトリをクローンします。**
   ```bash
   git clone https://github.com/apple-computer-machintosh/node.git
   ```

## 用意するもの

### ハードウェア

- **Arduinoボード**
    - Arduino Uno または互換性のあるボード
- **ジャンパーワイヤー**: ブレッドボードとコンポーネントを接続するためのもの。
- **ブレッドボード**: 回路を簡単に組むためのボード。
- **スピーカー**または**ブザー**: 音を出力するためのデバイス。
- **ピアノ鍵盤**: 音源として使用します。市販のMIDIキーボードやピアノ鍵盤などが使用可能です。

### ソフトウェア

- **Arduino IDE**: Arduinoボードにプログラムをアップロードするためのソフトウェア。
  - ダウンロードリンク: [Arduino IDE](https://www.arduino.cc/en/software)
- **Node.js**: クライアントからArduinoにリクエストするため
- **Live2Dモデル**: クライアントに立ち絵を設置するためのモデル
    - サンプルデータ: [Live2D サンプルデータ集（無料配布）](https://www.live2d.com/learn/sample/)

## 環境

このプロジェクトはWindows環境でテストされました。以下の点に注意してください。

- **OS**: Windows 10 (他のOSでは動作が確認されていません)
- **USBケーブル**: ArduinoボードをPCに接続するためのもの（ボードに応じてタイプが異なる場合があります）。
- **Arduino IDE**:  v2.3.3 でテスト
- **Node.js**: v20.17.0 でテスト
- **ハードウェア**: Arduino Uno でテスト

## 使い方

### 1. HTMLファイルを表示する

1. **HTMLファイルを準備する**:
   - プロジェクトのディレクトリ内にある`index.html`ファイルを見つけてください。

2. **ブラウザで開く**:
   - `index.html`ファイルをダブルクリックするか、任意のブラウザにドラッグ＆ドロップします。
   - これにより、アプリケーションのインターフェースが表示されます。

### 2. Node.jsプログラムを実行する

1. **Node.jsをインストールする**（未インストールの場合）:
   - [Node.jsの公式サイト](https://nodejs.org/)から最新のLTS版をダウンロードしてインストールします。

2. **プロジェクトディレクトリに移動**:
   - コマンドラインまたはターミナルを開き、プロジェクトのルートディレクトリに移動します。
   ```bash
   cd node
   ```

3. **必要な依存関係をインストールする**:
    - プロジェクトで使用するライブラリをインストールします。
   ```bash
   npm install
   ```

4. **Node.jsプログラムを起動する**:
    - 以下のコマンドを実行して、Node.jsのプログラムを起動します。
   ```bash
   node index.js
   ```

### 3. Arduinoプログラムをインストールする

1. **Arduino IDEをインストールする**（未インストールの場合）:
   - [Arduinoの公式サイト](https://www.arduino.cc/en/software)から最新のArduino IDEをダウンロードしてインストールします。

2. **Arduinoボードを接続する**:
   - USBケーブルを使ってArduinoボードをPCに接続します。

3. **Arduinoプログラムを開く**:
   - プロジェクトディレクトリ内のArduinoスケッチ（例: `Arduino_musicCore/Arduino_musicCore.ino`）を開きます。

4. **ボードの設定**:
   - Arduino IDEで「ツール」メニューから、接続しているボードの種類（例: Arduino Uno）を選択します。
   - 同様に、接続ポートも正しく設定します。

5. **プログラムをアップロードする**:
   - Arduino IDEの「アップロード」ボタンをクリックして、プログラムをボードにインストールします。

### 4. 動作確認
    - Node.jsプログラムが正しく動作していることを確認し、ブラウザで表示されたインターフェースを使って、Arduinoと通信できることを確認します。

## 機能

- **ピアノ演奏に合わせてLive2Dモデルのモーションを制御**:
    - 鍵盤の押下を検出する
    - 押された鍵盤に対応するモーションをLive2Dモデルに送信する
- **複数のモーション設定**:
    - 各鍵盤に異なるモーションを割り当てることができます。
    - 例: ドレミファソラシドそれぞれに異なる表情や動きを設定できます。
- **Node.jsとArduino間のシリアル通信**:
    - Node.jsプログラムは、Arduinoとシリアル通信を行い、モーションデータを送信します。
    - Arduinoプログラムは、受信したモーションデータに基づいて、Live2Dモデルのモーションを制御します。

## 依存関係

- **Node.js**:
    - `serialport`: Arduinoとのシリアル通信を行うためのライブラリ
    - `express`: Webサーバーを構築するためのフレームワーク
- **Arduino**:
    - `MIDI.h`: MIDI信号を処理するためのライブラリ

## 貢献

このプロジェクトへの貢献は大歓迎です。

1. **問題の報告**: バグや機能リクエストを報告してください。
2. **プルリクエスト**: コードの改善や新機能の追加を提案してください。
3. **ドキュメントの改善**: ドキュメントの修正や追加を行ってください。

## ライセンス

このプロジェクトは、**MITライセンス**の下でライセンスされています。

## 連絡先

- **GitHub**: [apple-computer-machintosh]
